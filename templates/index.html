<!DOCTYPE html>
<html>
<head>
    <title>Network Graph</title>
    <!-- 引入 Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <h1>Centrality and Community detection</h1>
    <!-- 显示闪现消息 -->
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        {% for message in messages %}
          <div style="color: red;">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <!-- Operation Guide Modal -->
    <div class="modal fade" id="operationGuideModal" tabindex="-1" role="dialog" aria-labelledby="operationGuideModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="operationGuideModalLabel">Operation Guide</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    If you want to edit nodes or edges (such as delete, add), please enable "Manipulation".<br>
                    If you want to adjust physical effects, please enable "Physics".
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 显示交互式图像 -->
    {% if graph_html_path %}
        <iframe src="{{ url_for('static', filename=graph_html_path.split('/')[-1]) }}" height="1000" width="100%"></iframe>
    {% else %}
        <p>No graph to display.</p>
    {% endif %}
    <br>
    <a href="{{ url_for('upload_file') }}">Upload another file</a>

    <!-- Print filename for debugging -->
    <p>Current Filename: {{ filename }}</p>

    <script type="text/javascript">
        function disableButtonsAndShowWaitMessage() {
            var submitButtons = document.querySelectorAll('input[type="submit"], input[type="button"]');
            for (var i = 0; i < submitButtons.length; i++) {
                submitButtons[i].value = 'Please wait...';
                submitButtons[i].disabled = true;
            }
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function() {
            // 页面加载完毕后自动显示模态框
            $('#operationGuideModal').modal('show');
        });
    </script>
</body>
</html>
